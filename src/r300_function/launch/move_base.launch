<launch>
    <!-- 仅保留原有参数和 move_base 节点，删除 map_server 相关内容 -->
    <arg name="cmd_vel_topic" default="/cmd_vel" />
    <arg name="odom_topic" default="/odom" />
    <arg name="move_forward_only" default="false"/>

    <!-- move_base 核心节点（不启动 map_server） -->
    <node pkg="move_base" type="move_base" respawn="false" name="move_base" output="screen">
        <param name="base_local_planner" value="dwa_local_planner/DWAPlannerROS" />
        <param name="DWAPlannerROS/min_vel_x" value="0.0" if="$(arg move_forward_only)" />

        <rosparam file="$(find r300_function)/config/costmap_common_params.yaml" command="load" ns="global_costmap" />
        <rosparam file="$(find r300_function)/config/costmap_common_params.yaml" command="load" ns="local_costmap" />
        <rosparam file="$(find r300_function)/config/local_costmap_params.yaml" command="load" />
        <rosparam file="$(find r300_function)/config/global_costmap_params.yaml" command="load" />
        <rosparam file="$(find r300_function)/config/move_base_params.yaml" command="load" />
        <rosparam file="$(find r300_function)/config/dwa_local_planner_params.yaml" command="load" />

        <remap from="cmd_vel" to="$(arg cmd_vel_topic)"/>
        <remap from="odom" to="$(arg odom_topic)"/>
    </node>

    <!-- 可选：静态TF发布（雷达与底盘TF未匹配时启用） -->
    <!--
    <node pkg="tf" type="static_transform_publisher" name="lidar_to_base_link"
          args="0.0 0.0 0.3 0.0 0.0 0.0 base_link unitree_lidar 100" />
    -->
</launch>
